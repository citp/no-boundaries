<!doctype html>
<html>
  <head>
  <title>Test page that registers various event listeners</title>
  <script type="application/javascript">

  function add_listeners() {

    // Add few filtered listeners. See #11
    window.addEventListener('load', function(e) {
      console.log("window load event fired");
    }, true);
    window.addEventListener('unload', function(e) {
      console.log("window unload event fired");
    }, true);
    window.addEventListener('resize', function(e) {
      console.log("window resize event fired");
    }, true);
    window.addEventListener('scroll', function(e) {
      console.log("window scroll event fired");
    }, true);
    window.addEventListener('beforeunload', function(e) {
      console.log("window beforeunload event fired");
    }, true);
    window.addEventListener('popstate', function(e) {
      console.log("window popstate event fired");
    }, true);
    window.addEventListener('test', function(e) {
      console.log("window test event fired");
    }, true);
    window.document.addEventListener('DOMContentLoaded', function(e) {
      console.log("document DOMContentLoaded event fired");
    }, true);
    window.document.addEventListener('visibilitychange', function(e) {
      console.log("document visibilitychange event fired");
    }, true);


    // Add event listeners that should not be filtered
    window.document.addEventListener('scroll', function(e) {
      console.log("document scroll event fired");
    }, true);
    window.document.addEventListener('beforeunload', function(e) {
      console.log("document beforeunload event fired");
    }, true);
    window.document.body.addEventListener('beforeunload', function(e) {
      console.log("document body beforeunload event fired");
    }, true);
    window.document.body.addEventListener('scroll', function(e) {
      console.log("document body scroll event fired");
    }, true);

    // Add listeners directly to input elements
    var inputs = document.querySelectorAll("input");
    for (var i=0; i<inputs.length; i++) {
      inputs[i].addEventListener("blur", function (e) {
        console.log("input listener fired on blur", e.target.value);
      }, false);
    }

    // Add listeners to forms
    var forms = document.getElementsByTagName("form");
    for (var i=0; i<forms.length; i++) {
      forms[i].addEventListener("submit", function (e) {
        console.log("form listener fired on submit", e.target.value);
      }, false);
    }

    // Add listener to document body
    window.document.body.addEventListener("blur", function(e) {
      console.log("body listener fired on blur", e.target.value);
    }, true);

    // Add listener to document
    window.document.addEventListener("blur", function(e) {
      console.log("document listener fired on blur", e.target.value);
    }, true);

    // Add listener to window object
    window.addEventListener("blur", function(e) {
      console.log("window listener fired on blur", e.target.value);
    }, true);
  }

  </script>
  </head>
  <body onload="add_listeners()">

    <h3> A fake login form contained in a div</h3>
    <div id='div1'>
      <form id="theForm" action="">
        Email: <input id="input1" type='email' name='email' value='example@gmail.com'><br />
        Password: <input id="input2" type = 'password' value='password'>
        <input type="submit" value="submit">
      </form>
    </div>

  </body>
</html>
